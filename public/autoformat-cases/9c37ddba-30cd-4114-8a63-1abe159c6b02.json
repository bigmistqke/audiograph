{
  "id": "9c37ddba-30cd-4114-8a63-1abe159c6b02",
  "title": "Split pulled right to align with downstream merge",
  "comments": [
    {
      "role": "user",
      "text": "an example of a split node being pulled towards its parent (F) and its parents position is determined by its preceding chain (A-D-E-C)"
    },
    {
      "role": "assistant",
      "text": "Chains: [A,B] (A split → B split), [B,C] (B → C merge, no internals), [A,D,E,C] (A → D → E → C merge, E is last internal), [B,F] (B → F leaf).\n\nForward pass: E.x = D.right + gap = 260 (sequential). C.x = max(B.right, E.right) + gap — but B isn't placed yet, so C is driven by E: C.x = 360 + 30 = 390.\n\nBackward pass: B (split) is pulled toward C — its longest child path to C has minChildPathWidth = 100 (just node C). B.x = max(A.right + gap, C.x - 100 - 30) = max(130, 260) = 260.\n\nRule tested: CPM backward pass — split node B is pulled rightward so its child chain snaps flush against the downstream merge."
    }
  ],
  "initial": {
    "nodes": {
      "A": {
        "id": "A",
        "type": "node",
        "x": 0,
        "y": 0,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      },
      "B": {
        "id": "B",
        "type": "node",
        "x": 230,
        "y": 30,
        "dimensions": {
          "x": 100,
          "y": 100
        }
      },
      "C": {
        "id": "C",
        "type": "node",
        "x": 440,
        "y": 20,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      },
      "D": {
        "id": "D",
        "type": "node",
        "x": 120,
        "y": 180,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      },
      "E": {
        "id": "E",
        "type": "node",
        "x": 260,
        "y": 180,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      },
      "F": {
        "id": "F",
        "type": "node",
        "x": 410,
        "y": 170,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      }
    },
    "edges": [
      {
        "output": {
          "node": "A",
          "port": "out"
        },
        "input": {
          "node": "B",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "B",
          "port": "out"
        },
        "input": {
          "node": "C",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "A",
          "port": "out"
        },
        "input": {
          "node": "D",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "D",
          "port": "out"
        },
        "input": {
          "node": "E",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "E",
          "port": "out"
        },
        "input": {
          "node": "C",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "B",
          "port": "out"
        },
        "input": {
          "node": "F",
          "port": "in"
        }
      }
    ]
  },
  "expected": {
    "nodes": {
      "A": {
        "id": "A",
        "type": "node",
        "x": 0,
        "y": 0,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      },
      "B": {
        "id": "B",
        "type": "node",
        "x": 200,
        "y": 20,
        "dimensions": {
          "x": 100,
          "y": 100
        }
      },
      "C": {
        "id": "C",
        "type": "node",
        "x": 390,
        "y": 0,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      },
      "D": {
        "id": "D",
        "type": "node",
        "x": 130,
        "y": 130,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      },
      "E": {
        "id": "E",
        "type": "node",
        "x": 260,
        "y": 130,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      },
      "F": {
        "id": "F",
        "type": "node",
        "x": 390,
        "y": 110,
        "dimensions": {
          "x": 100,
          "y": 80
        }
      }
    },
    "edges": [
      {
        "output": {
          "node": "A",
          "port": "out"
        },
        "input": {
          "node": "D",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "A",
          "port": "out"
        },
        "input": {
          "node": "B",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "D",
          "port": "out"
        },
        "input": {
          "node": "E",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "B",
          "port": "out"
        },
        "input": {
          "node": "F",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "E",
          "port": "out"
        },
        "input": {
          "node": "C",
          "port": "in"
        }
      },
      {
        "output": {
          "node": "B",
          "port": "out"
        },
        "input": {
          "node": "C",
          "port": "in"
        }
      }
    ]
  }
}